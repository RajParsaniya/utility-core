<h3>(6) Stream.flatMap()</h3>

<p>
	The <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/Stream.html" target="_blank">Stream</a> interface provides a
	<strong>flatMap()</strong> method that accepts a
	<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/function/Function.html" target="_blank">Function</a> functional interface,
	which maps each element to a stream of new values, and returns a new stream consisting of the flattened results.
</p>

<div class="accordion">
	<div class="accordion-header">
		<span>Checked exceptions can be handled smoothly within the <strong>flatMap()</strong> method without causing compile-time errors.</span>
	</div>
	<div class="accordion-content">
		<ul class="accordion-content-ul">
			<li class="accordion-content-li">
				<span class="accordion-content-span">
					To achieve this, You can instantiate a class implementing the
					<a id="stream-exception-handler" target="_blank">IStreamExceptionHandler</a> interface to handle exceptions. Alternatively, You can use the
					<a id="stream-utils" target="_blank">StreamUtils</a> method to achieve the same functionality without explicitly creating an instance of the
					implementing class.
				</span>
			</li>
			<li class="accordion-content-li">
				<span class="accordion-content-span">
					The <strong>setCatchable()</strong> method allows you to specify which exceptions should be caught and handled internally, ensuring that the
					stream flow remains uninterrupted. Additionally, the <strong>setThrowable()</strong> method lets you define which exceptions should be
					rethrown—optionally wrapping them with custom messages or exception types for more controlled error propagation.
				</span>
			</li>
			<li class="accordion-content-li">
				<span class="accordion-content-span">
					The following code demonstrates how to apply the <strong>flatMap()</strong> method to a list of directory paths, ensuring that the stream
					continues processing even in the presence of checked exception. For each directory, it retrieves the content of all files within it as a
					stream of strings and then flattens these streams into a single
					<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/Stream.html" target="_blank">Stream</a>. The content
					of all files is then joined into a single string.
				</span>
			</li>
		</ul>
		<div id="stream-exception-handler-flat-map" class="gist-container"></div>
	</div>
</div>

<div class="accordion">
	<div class="accordion-header">
		<span>Element indices can be accessed and managed within the <strong>flatMap()</strong> method during stream processing.</span>
	</div>
	<div class="accordion-content">
		<ul class="accordion-content-ul">
			<li class="accordion-content-li">
				<span class="accordion-content-span">
					To achieve this, You can instantiate a class implementing the <a id="stream-index-handler" target="_blank">IStreamIndexHandler</a> interface
					to manage indices explicitly. Alternatively, You can use the <a id="stream-utils" target="_blank">StreamUtils</a> method to achieve the same
					functionality without explicitly creating an instance of the implementing class.
				</span>
			</li>
			<li class="accordion-content-li">
				<span class="accordion-content-span">
					The <strong>setInitialIndex()</strong> method allows you to specify a custom starting index for stream element processing. By setting the
					initial index explicitly, you maintain full control over index values—ensuring consistency across stream operations.
				</span>
			</li>
			<li class="accordion-content-li">
				<span class="accordion-content-span">
					The following code demonstrates how to apply the <strong>flatMap()</strong> method to a list of item collections while ensuring that the
					stream continues processing even in the presence of index-based operations. The provided bi-function transforms each collection of items by
					combining each item with its respective order index, flattening the resulting streams into a single
					<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/Stream.html" target="_blank">Stream</a> of item
					details. This operation results in a single stream of formatted item-order details.
				</span>
			</li>
		</ul>
		<div id="stream-index-handler-flat-map" class="gist-container"></div>
	</div>
</div>

<div class="accordion">
	<div class="accordion-header">
		<span>Both of the above functionalities can be achieved within the <strong>flatMap()</strong> method.</span>
	</div>
	<div class="accordion-content">
		<ul class="accordion-content-ul">
			<li class="accordion-content-li">
				<span class="accordion-content-span">
					To achieve this, you can instantiate a class implementing the <a id="stream-handler" target="_blank">IStreamHandler</a> interface to handle
					exceptions and manage element indices during stream operations. Alternatively, you can use the
					<a id="stream-utils" target="_blank">StreamUtils</a> utility methods to obtain the same functionality without explicitly creating an
					instance of the implementing class.
				</span>
			</li>
			<li class="accordion-content-li">
				<span class="accordion-content-span">
					The <strong>setCatchable()</strong> method identifies exceptions that should be handled internally, ensuring that stream processing
					continues without disruption. Meanwhile, the <strong>setThrowable()</strong> method identifies exceptions that should be rethrown, with the
					option to wrap them in custom messages or exception types for controlled error handling. Additionally, the
					<strong>setInitialIndex()</strong> method allows you to set a custom initial index, ensuring accurate and consistent index tracking
					throughout the stream's execution.
				</span>
			</li>
		</ul>
		<div id="stream-handler-flat-map" class="gist-container"></div>
	</div>
</div>
